#include <iostream>
#include <vector>
#include <iomanip>
using namespace std;

vector<vector<int>> all;

void sortdir(int array[], int i, int j, int dir) { //возрастание или убывание

	//countSort++;
	//cout << countSort << ". Сравниваем " << array[i] << " и " << array[j] << " \n";

	// Исправить цифру 8 !!!!!!!!!!
	vector<int> oneArray;
	for (int cnt = 0; cnt < 8; cnt++) {
		oneArray.push_back(array[cnt]);
	}
	all.push_back(oneArray);

	if (dir == (array[i] > array[j])) {

		//cout << "Меняем местами " << array[i] << " и " << array[j] << " \n";

		swap(array[i], array[j]);
	}
}

/* Pекурсивно сортирует последовательность в порядке возрастания
   (dir == 1), или убывания (dir == 0).
   Сортируемая последовательность начинается с младшей позиции индекса,
   параметр cnt - это количество элементов для сортировки. */
void merge(int array[], int low, int cnt, int dir) {
	if (cnt > 1) {
		int k = cnt / 2;
		for (int i = low; i < low + k; i++) sortdir(array, i, i + k, dir);
		merge(array, low, k, dir);
		merge(array, low + k, k, dir);
	}
}

/* Создаём последовательность рекурсивно.
   Сортируем две половинки, затем вызываем merge */
void sort(int array[], int low, int cnt, int dir) {
	if (cnt > 1) {
		int k = cnt / 2;
		sort(array, low, k, 1);
		sort(array, low + k, k, 0);
		merge(array, low, cnt, dir);
	}
}

void output(int array[], int size) {

	for (int i = 0; i < size; i++) {
		cout << array[i] << " ";
	}
	cout << endl;
}

int main() {
	srand(time(0)); // генерация случайных чисел
	setlocale(LC_ALL, "Russian");

	const int size = 8;
	int array[size];

	// Заполняем массив случайными числами
	for (int i = 0; i < size; i++) {
		array[i] = rand() % 10;
	}

	cout << setw(25) << "Изначальный массив: ";
	output(array, size);

	// Отсортировать массив по возрастанию (последний параметр)
	sort(array, 0, size, 1);

	cout << setw(25) << "Отсортированный массив: ";
	output(array, size);

	cout << endl;
	cout << "\t Сортировочная сеть:";
	cout << endl << endl;

	cout << "\t 0.   " << all[0][0] << " ---- " << all[2][0] << " ---" <<    "-"    << "----- " << all[4][0]  << " ---- " << all[12][0] << " ---" <<    "-"     << "----" <<    "-"     << "----" <<    "-"     << "----- " << all[16][0] << " ---" <<    "-"     << "----- " << all[18][0] << "\n";
	cout << "\t      " <<    "|"    << " ---- " <<    "|"    << " ---" <<    "-"    << "----- " <<    "|"     << " ---- " <<    "|"     << " ---" <<    "-"     << "----" <<    "-"     << "----" <<    "-"     << "----- " <<    "|"     << " ---" <<    "-"     << "----- " <<    "|"    << "\n";
	cout << "\t 1.   " << all[0][1] << " ---- " <<    "|"    << " -- " << all[3][1] << " ---- " << all[4][1]  << " ---- " <<    "|"     << " -- " << all[13][1] << " ---" <<    "-"     << "----" <<    "-"     << "----- " <<    "|"     << " -- " << all[17][1] << " ---- " << all[18][1] << "\n";
	cout << "\t      " <<    "-"    << "----- " <<    "|"    << " -- " <<    "|"    << " -----" <<    "-"     << "----- " <<    "|"     << " -- " <<    "|"     << " ---" <<    "-"     << "----" <<    "-"     << "----- " <<    "|"     << " -- " <<    "|"     << " -----" <<    "-"     << "\n";
	cout << "\t 2.   " << all[1][2] << " ---- " << all[2][2] << " -- " <<    "|"    << " ---- " << all[5][2]  << " ---- " <<    "|"     << " -- " <<    "|"     << " -- " << all[14][2] << " ---" <<    "-"     << "----- " << all[16][2] << " -- " <<    "|"     << " ---- " << all[19][2] << "\n";
	cout << "\t      " <<    "|"    << " -----" <<    "-"    << "--- " <<    "|"    << " ---- " <<    "|"     << " ---- " <<    "|"     << " -- " <<    "|"     << " -- " <<    "|"     << " ---" <<    "-"     << "------" <<    "-"     << "--- " <<    "|"     << " ---- " <<    "|"     << "\n";
	cout << "\t 3.   " << all[1][3] << " -----" <<    "-"    << "--- " << all[3][3] << " ---- " << all[5][3]  << " ---- " <<    "|"     << " -- " <<    "|"     << " -- " <<    "|"     << " -- " << all[15][3] << " -----" <<    "-"     << "--- " << all[17][3] << " ---- " << all[19][3] << "\n";
	cout << "\t      " <<    "-"    << "------" <<    "-"    << "----" <<    "-"    << "------" <<    "-"     << "----- " <<    "|"     << " -- " <<    "|"     << " -- " <<    "|"     << " -- " <<    "|"     << " -----" <<    "-"     << "----" <<    "-"     << "------" <<    "-"     << "\n";
	cout << "\t 4.   " << all[6][4] << " ---- " << all[8][4] << " ---" <<    "-"    << "----- " << all[10][4] << " ---- " << all[12][4] << " -- " <<    "|"     << " -- " <<    "|"     << " -- " <<    "|"     << " ---- " << all[20][4] << " ---" <<    "-"     << "----- " << all[22][4] << "\n";
	cout << "\t      " <<    "|"    << " ---- " <<    "|"    << " ---" <<    "-"    << "----- " <<    "|"     << " -----" <<    "-"     << "--- " <<    "|"     << " -- " <<    "|"     << " -- " <<    "|"     << " ---- " <<    "|"     << " ---" <<    "-"     << "----- " <<    "|"     << "\n";
	cout << "\t 5.   " << all[6][5] << " ---- " <<    "|"    << " -- " << all[9][5] << " ---- " << all[10][5] << " -----" <<    "-"     << "--- " << all[13][5] << " -- " <<    "|"     << " -- " <<    "|"     << " ---- " <<    "|"     << " -- " << all[21][5] << " ---- " << all[22][5] << "\n";
	cout << "\t      " <<    "-"    << "----- " <<    "|"    << " -- " <<    "|"    << " -----" <<    "-"     << "------" <<    "-"     << "----" <<    "-"     << "--- " <<    "|"     << " -- " <<    "|"     << " ---- " <<    "|"     << " -- " <<    "|"     << " -----" <<    "-"     << "\n";
	cout << "\t 6.   " << all[7][6] << " ---- " << all[8][6] << " -- " <<    "|"    << " ---- " << all[11][6] << " -----" <<    "-"     << "----" <<    "-"     << "--- " << all[14][6] << " -- " <<    "|"     << " ---- " << all[20][6] << " -- " <<    "|"     << " ---- " << all[23][6] << "\n";
	cout << "\t      " <<    "|"    << " -----" <<    "-"    << "--- " <<    "|"    << " ---- " <<    "|"     << " -----" <<    "-"     << "----" <<    "-"     << "----" <<    "-"     << "--- " <<    "|"     << " -----" <<    "-"     << "--- " <<    "|"     << " ---- " <<    "|"     << "\n";
	cout << "\t 7.   " << all[7][7] << " -----" <<    "-"    << "--- " << all[9][7] << " ---- " << all[11][7] << " -----" <<    "-"     << "----" <<    "-"     << "----" <<    "-"     << "--- " << all[15][7] << " -----" <<    "-"     << "--- " << all[21][7] << " ---- " << all[23][7] << "\n";





	/*
	int tst = 5;
	cout << "\t 0.   " << tst << " ---- " << tst << " ---" << "-" << "----- " << tst << " ---- " << tst << " ---" << "-" << "----" << "-" << "----" << "-" << "----- " << tst << " ---" << "-" << "----- " << tst << "\n";
	cout << "\t      " << "|" << " ---- " << "|" << " ---" << "-" << "----- " << "|" << " ---- " << "|" << " ---" << "-" << "----" << "-" << "----" << "-" << "----- " << "|" << " ---" << "-" << "----- " << "|" "\n";
	cout << "\t 1.   " << tst << " ---- " << "|" << " -- " << tst << " ---- " << tst << " ---- " << "|" << " -- " << tst << " ---" << "-" << "----" << "-" << "----- " << "|" << " -- " << tst << " ---- " << tst << "\n";
	cout << "\t      " << "-" << "----- " << "|" << " -- " << "|" << " -----" << "-" << "----- " << "|" << " -- " << "|" << " ---" << "-" << "----" << "-" << "----- " << "|" << " -- " << "|" << " -----" << "-" << "\n";
	cout << "\t 2.   " << tst << " ---- " << tst << " -- " << "|" << " ---- " << tst << " ---- " << "|" << " -- " << "|" << " -- " << tst << " ---" << "-" << "----- " << tst << " -- " << "|" << " ---- " << tst << "\n";
	cout << "\t      " << "|" << " -----" << "-" << "--- " << "|" << " ---- " << "|" << " ---- " << "|" << " -- " << "|" << " -- " << "|" << " ---" << "-" << "------" << "-" << "--- " << "|" << " ---- " << "|" << "\n";
	cout << "\t 3.   " << tst << " -----" << "-" << "--- " << tst << " ---- " << tst << " ---- " << "|" << " -- " << "|" << " -- " << "|" << " -- " << tst << " -----" << "-" << "--- " << tst << " ---- " << tst << "\n";
	cout << "\t      " << "-" << "------" << "-" << "----" << "-" << "------" << "-" << "----- " << "|" << " -- " << "|" << " -- " << "|" << " -- " << "|" << " -----" << "-" << "----" << "-" << "------" << "-" << "\n";
	cout << "\t 4.   " << tst << " ---- " << tst << " ---" << "-" << "----- " << tst << " ---- " << tst << " -- " << "|" << " -- " << "|" << " -- " << "|" << " ---- " << tst << " ---" << "-" << "----- " << tst << "\n";
	cout << "\t      " << "|" << " ---- " << "|" << " ---" << "-" << "----- " << "|" << " -----" << "-" << "--- " << "|" << " -- " << "|" << " -- " << "|" << " ---- " << "|" << " ---" << "-" << "----- " << "|" << "\n";
	cout << "\t 5.   " << tst << " ---- " << "|" << " -- " << tst << " ---- " << tst << " -----" << "-" << "--- " << tst << " -- " << "|" << " -- " << "|" << " ---- " << "|" << " -- " << tst << " ---- " << tst << "\n";
	cout << "\t      " << "-" << "----- " << "|" << " -- " << "|" << " -----" << "-" << "------" << "-" << "----" << "-" << "--- " << "|" << " -- " << "|" << " ---- " << "|" << " -- " << "|" << " -----" << "-" << "\n";
	cout << "\t 6.   " << tst << " ---- " << tst << " -- " << "|" << " ---- " << tst << " -----" << "-" << "----" << "-" << "--- " << tst << " -- " << "|" << " ---- " << tst << " -- " << "|" << " ---- " << tst << "\n";
	cout << "\t      " << "|" << " -----" << "-" << "--- " << "|" << " ---- " << "|" << " -----" << "-" << "----" << "-" << "----" << "-" << "--- " << "|" << " -----" << "-" << "--- " << "|" << " ---- " << "|" << "\n";
	cout << "\t 7.   " << tst << " -----" << "-" << "--- " << tst << " ---- " << tst << " -----" << "-" << "----" << "-" << "----" << "-" << "--- " << tst << " -----" << "-" << "--- " << tst << " ---- " << tst << "\n";
	*/








	return 0;
}